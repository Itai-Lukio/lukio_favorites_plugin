(function(t){t(document).ready(function(){function o(o,i,e){t.ajax({method:"GET",url:lukio_favorites_ajax.ajax_url,data:{action:"lukio_favorites_get_preview_img",id:o},success:function(o){o&&(o=JSON.parse(o),!0===o.success&&(i.replaceWith(o.image),t(`.lukio_favorites_button[data-lukio-fav="${e?1:0}"] img`).attr("src",o.image_src)))}})}t(".lukio_favorirs_options_tab").on("click",function(){let o=t(this);if(o.hasClass("active"))return;let i=o.data("tab");t(".lukio_favorirs_options_tab.active, .lukio_favorirs_options_tab_content.active").removeClass("active"),t(`.lukio_favorirs_options_tab[data-tab="${i}"], .lukio_favorirs_options_tab_content[data-tab="${i}"]`).addClass("active")}),t("#custom_button").on("change",function(){t(".lukio_custom_button_wrapper, .lukio_custom_images_wrapper, .button_content").toggleClass("hide_option")}),t(".lukio_set_custom_images").on("click",function(i){i.preventDefault();let e,a=t(this),n=a.siblings(".lukio_process_custom_images"),l=a.siblings(".preview_image");e&&e.open(),e=wp.media({title:"",multiple:!1,library:{type:"image"}}),e.on("close",function(){let t=e.state().get("selection"),i=new Array,a=0;t.each(function(t){i[a]=t.id,a++});let s=i.join(",");if(0===s.length)return!0;if(n.val(s),"0"!=s){let t="lukio_favorites[custom_button_on]"==n.attr("name");o(s,l,t)}}),e.on("open",function(){let t=e.state().get("selection"),o=n.val().split(",");o.forEach(function(o){let i=wp.media.attachment(o);i.fetch(),t.add(i?[i]:[])})}),e.open()}),t(".lukio_color_picker").wpColorPicker({defaultColor:t("#lukio_default_color").val(),change:function(o,i){t('.lukio_favorites_button[data-lukio-fav="0"] .lukio_pre_fav,.lukio_favorites_button[data-lukio-fav="1"] .lukio_fav').css("fill",i.color.toString())}}),t(".lukio_edit_button_size").on("change",function(){let o=t(this),i="button_width"==o.attr("id")?"width":"height";t(".lukio_favorites_button").css(i,o.val()+"px")}),t(".lukio_svg_picker").on("change",function(){let o=t(this).val();t(".button_content_svg").addClass("hide_option"),t(`.hide_option[data-index="${o}"]`).removeClass("hide_option")})})})(jQuery);