jQuery(document).ready(function(t){function o(o,i,a){t.ajax({method:"GET",url:lukio_favorites_ajax.ajax_url,data:{action:"lukio_favorites_get_preview_img",id:o},success:function(o){o&&(o=JSON.parse(o),!0===o.success&&(i.attr("src",o.image_src),t(`.lukio_favorites_button[data-lukio-fav="${a?1:0}"] img`).attr("src",o.image_src)))}})}t(".lukio_favorirs_options_tab").on("click",function(){let o=t(this);if(o.hasClass("active"))return;let i=o.data("tab");t(".lukio_favorirs_options_tab.active, .lukio_favorirs_options_tab_content.active").removeClass("active"),t(`.lukio_favorirs_options_tab[data-tab="${i}"], .lukio_favorirs_options_tab_content[data-tab="${i}"]`).addClass("active")}),t("#text_button").on("change",function(){t(".lukio_favorirs_text_button_wrapper, .lukio_favorirs_image_button_wrapper").toggleClass("hide_option")}),t("#custom_button").on("change",function(){t(".lukio_favorirs_custom_button_wrapper, .lukio_favorirs_custom_images_wrapper, .lukio_favorirs_button_content").toggleClass("hide_option")}),t(".lukio_favorirs_set_custom_images").on("click",function(i){i.preventDefault();let a=t(this),e=a.siblings(".lukio_favorirs_process_custom_images"),n=a.siblings(".lukio_favorirs_custom_image_preview"),_=wp.media({title:a.data("popup_title"),multiple:!1,library:{type:"image"}});_.on("open",function(){let t=_.state().get("selection"),o=e.val(),i=wp.media.attachment(o);i.fetch(),t.add(i?[i]:[])}).on("close",function(){let t=_.state().get("selection");if(0==t.models.length)return;let i=t.models[0].id;if(e.val()==i)return;e.val(i);let a="custom_button_on"==e.attr("id");o(i,n,a)}),_.open()}),t(".lukio_favorirs_color_picker").wpColorPicker({defaultColor:t("#lukio_default_color").val(),change:function(o,i){t('.lukio_favorites_button[data-lukio-fav="0"] .lukio_pre_fav,.lukio_favorites_button[data-lukio-fav="1"] .lukio_fav').css("fill",i.color.toString())}}),t(".lukio_favorirs_edit_button_size").on("change",function(){let o=t(this),i="button_width"==o.attr("id")?"width":"height";t(".lukio_favorites_button").css(i,o.val()+"px")}).on("input",function(){let o=t(this);o.val(o.val().replace(/[^0-9]/g,""))}).on("keydown",function(o){"Enter"==o.key&&(o.preventDefault(),t(this).trigger("change"))}),t(".lukio_favorirs_svg_picker").on("change",function(){let o=t(this).val();t(".lukio_favorirs_button_content_svg").addClass("hide_option"),t(`.hide_option[data-index="${o}"]`).removeClass("hide_option")})});