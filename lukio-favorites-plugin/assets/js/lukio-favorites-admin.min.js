jQuery(document).ready(function(t){function e(t,e,o){let i=new RegExp("([?;&])("+t+"[^&;]*[;&]?)"),a=o.replace(i,"$1").replace(/[?&]$/,"");return a+(e?(a.length>0?"&":"?")+t+"="+e:"")}function o(e,o,i){t.ajax({method:"GET",url:lukio_favorites_ajax.ajax_url,data:{action:"lukio_favorites_get_preview_img",id:e},success:function(t){t&&(t=JSON.parse(t),!0===t.success&&(o.attr("src",t.image_src),o.closest(".lukio_favorites_options_tab_content").find(`.lukio_favorites_default_btn_wrapper [data-lukio-fav="${i?1:0}"] img`).attr("src",t.image_src)))}})}t(".lukio_favorites_options_tab").on("click",function(){let o=t(this);if(o.hasClass("active"))return;let i=o.data("tab");t(".lukio_favorites_options_tab.active, .lukio_favorites_options_tab_content.active").removeClass("active"),t(`.lukio_favorites_options_tab[data-tab="${i}"], .lukio_favorites_options_tab_content[data-tab="${i}"]`).addClass("active"),window.history.replaceState({},"",window.location.pathname+e("tab",i,window.location.search))}),t(".lukio_favorites_switch_input").on("change",function(){t(`[data-toggle="${t(this).attr("name")}"]`).toggleClass("hide_option")}),t(".lukio_favorites_set_custom_images").on("click",function(e){e.preventDefault();let i=t(this),a=i.siblings(".lukio_favorites_process_custom_images"),n=i.siblings(".lukio_favorites_custom_image_preview"),s=wp.media({title:i.data("popup-title"),multiple:!1,library:{type:"image"}});s.on("open",function(){let t=s.state().get("selection"),e=a.val(),o=wp.media.attachment(e);o.fetch(),t.add(o?[o]:[])}).on("close",function(){let t=s.state().get("selection");if(0==t.models.length)return;let e=t.models[0].id;if(a.val()==e)return;a.val(e);let i=a.attr("id").includes("_on");o(e,n,i)}),s.open()}),t(".lukio_favorites_color_picker").wpColorPicker({defaultColor:t("#lukio_default_color").val(),change:function(e,o){let i=t(e.target).closest(".lukio_favorites_options_tab_content");i.find('[data-lukio-fav="0"] .lukio_favorites_unmarked,[data-lukio-fav="1"] .lukio_favorites_marked').css("fill",o.color.toString())}}),t(".lukio_favorites_edit_button_size").on("change",function(){let e=t(this),o=e.attr("id").includes("width")?"width":"height",i=t(this).closest(".lukio_favorites_options_tab_content");i.find(".preview_button").css(o,e.val()+"px")}).on("input",function(){t(this).trigger("change")}).on("keydown",function(t){"Enter"==t.key&&t.preventDefault()}),t(".lukio_favorites_text_input").on("keydown",function(t){"Enter"==t.key&&t.preventDefault()}),t(".lukio_favorites_svg_picker").on("change",function(){let e=t(this),o=e.val(),i=t(this).closest(".lukio_favorites_options_tab_content");i.find(".lukio_favorites_button_content_svg").addClass("hide_option"),i.find(`.lukio_favorites_button_content_svg[data-index="${o}"]`).removeClass("hide_option")})});