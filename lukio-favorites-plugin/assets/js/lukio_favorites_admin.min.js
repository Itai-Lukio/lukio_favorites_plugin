(function(t){t(document).ready(function(){function e(e,o){t.ajax({method:"GET",url:lukio_favorites_ajax.ajax_url,data:{action:"lukio_favorites_get_preview_img",id:e},success:function(t){t&&(t=JSON.parse(t),!0===t.success&&o.replaceWith(t.image))}})}t("#custom_button").on("change",function(){t(".lukio_custom_button_wrapper, .lukio_custom_images_wrapper").toggleClass("hide_option")}),t(".set_custom_images").on("click",function(o){o.preventDefault();let i,a=t(this),n=a.siblings(".process_custom_images"),l=a.siblings(".preview_image");i&&i.open(),i=wp.media({title:"",multiple:!1,library:{type:"image"}}),i.on("close",function(){let t=i.state().get("selection"),o=new Array,a=0;t.each(function(t){o[a]=t.id,a++});let u=o.join(",");if(0===u.length)return!0;n.val(u),"0"!=u&&e(u,l)}),i.on("open",function(){let t=i.state().get("selection"),e=n.val().split(",");e.forEach(function(e){let o=wp.media.attachment(e);o.fetch(),t.add(o?[o]:[])})}),i.open()}),t(".lukio_color_picker").wpColorPicker({defaultColor:t("#lukio_default_color").val(),change:function(e,o){t('.lukio_favorites_button[data-lukio-fav="0"] .lukio_pre_fav,.lukio_favorites_button[data-lukio-fav="1"] .lukio_fav').css("fill",o.color.toString())}})})})(jQuery);